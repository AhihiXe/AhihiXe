@using PagedList;
@using PagedList.Mvc;
@*@model IEnumerable<BookStore.Model.DataToObject.SachDTO>*@
@model PagedList.PagedList<BookStore.Models.DataToObject.BookDTO>

@{
    Layout = "~/Views/Shared/_Layout_Manager.cshtml";
}
@*<div class="progressbar-heading grids-heading">
    <h2>Danh mục sách</h2>
</div>*@
<p>
    @*@Html.ActionLink("CreateNew", "Create")*@
    <a href="@Url.Action("BookCreate", "Manage")" itemprop="url" style="color:orangered; font-size:30">
        Thêm mới sách
    </a>
</p>
@*Phân trang*@
@*@(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber)/@Model.PageCount*@
<div style="display:inline; float:right;">
    @Html.PagedListPager(Model, page => Url.Action("BookManager", new { page = page }))
</div>
<div class="panel panel-widget forms-panel">
    <div class="forms">
        <div class="form-grids widget-shadow" data-example-id="basic-forms">
            <div class="form-title">
                <h4>Danh mục sách</h4>
            </div>
            <div class="form-body">


                <table class="table">
                    <tr>
                        <th>
                            @Html.DisplayNameFor(model => model.First().MaSach)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.First().TenSach)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.First().GiaSach)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.First().SoLuong)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.First().TenTacGia)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.First().TenChuDe)
                        </th>
                        <th>Thao tác</th>
                    </tr>

                    @foreach (var item in Model)
                    {
                        <tr>
                            <td>
                                @Html.DisplayFor(modelItem => item.MaSach)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.TenSach)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.GiaSach)
                            </td>
                            <td>
                                @Html.DisplayFor(modelitem => item.SoLuong)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.TenTacGia)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.TenChuDe)
                            </td>
                            <td>
                                <a href="@Url.Action("BookUpdate", "Manage", new { @ID= item.MaSach})" itemprop="url">Edit</a> |
                                <a href="@Url.Action("BookDetails", "Manage", new { @ID= item.MaSach})" itemprop="url">Details</a> |
                                <a href="@Url.Action("BookDelete", "Manage", new { @ID= item.MaSach})" itemprop="url">Delete</a>

                            </td>
                        </tr>
                    }

                </table>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
                    function btn_book_delete() {
                        var r = confirm("Xóa thông tin sách");
                        if (r == true) {
                            $(".book").click(function (e) {
                                e.preventDefault();
                                $.post("@Url.Action("BookDelete","BookController")", { id: $(this).data("id") }, function (data) {
                                    alert(data);
                                });
                            });
                        }
                        else {

                        }

                    }
</script>


